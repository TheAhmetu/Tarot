<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tarot Falı - 3 Kartlık Açılım</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
  margin: 0; padding: 0;
  min-height: 100vh;
  background: linear-gradient(135deg, #0b0518 0%, #0b0a21 40%, #181b36 100%);
  font-family: 'Montserrat', Arial, sans-serif;
}
.hidden { display: none !important; }
.main-content { max-width:1200px; margin:auto; padding-bottom:50px; }
h1 {
  color: #ffe9a8;
  font-family: 'Playfair Display', serif;
  font-size: 2.7rem;
  margin-top:45px;
  letter-spacing:2.5px;
  background: linear-gradient(90deg, #ffecb3, #ffdf95 60%, #ffe179 100%);
  background-clip: text; -webkit-background-clip: text;
  -webkit-text-fill-color: transparent; text-fill-color: transparent;
  text-shadow:0 8px 40px #ffefbe33, 0 2px 6px #6c5a2a33;
}
.giris-aciklama {
  color: #fbeec8;
  font-size: 1.25em;
  margin: 24px auto 35px auto;
  max-width: 510px;
  background: #201a24d8;
  border-radius: 14px;
  padding: 18px 23px;
  text-align: center;
  box-shadow: 0 1px 8px #554e3559;
  line-height: 1.6;
  letter-spacing: .02em;
}
.giris-secimler {
  display: flex;
  justify-content: center;
  gap: 24px;
  margin-bottom: 36px;
  flex-wrap: wrap;
}
.giris-kutu {
  background: linear-gradient(125deg,#2a2237 68%,#443073 100%);
  color: #ffe9a8;
  border-radius: 17px;
  padding: 34px 22px 30px 22px;
  font-size: 1.2em;
  font-weight: bold;
  min-width: 200px; min-height:120px;
  max-width: 300px;
  box-shadow: 0 2px 17px #342d4641,0 1px 5px #fff1;
  cursor: pointer;
  text-align: center;
  letter-spacing:.5px;
  position:relative;
  transition:box-shadow .15s, filter .18s, background .13s;
  border:2.2px solid #3c3158;
  outline:none;
  user-select:none;
}
.giris-kutu:not(.disabled):hover {
  background: linear-gradient(125deg,#5a4386 68%,#8870c6 100%);
  box-shadow: 0 4px 20px #9e7be040,0 1px 8px #eeddbe3a;
  filter: brightness(1.09);
}
.giris-kutu .emoji {font-size:2em; display:block; margin-bottom:10px;}
.giris-kutu.disabled {
  background: linear-gradient(120deg,#2a223755 70%,#383052 100%);
  color:#d5c7a7cc;
  cursor: not-allowed;
  filter: grayscale(0.33) opacity(0.8);
  border:2.2px dashed #574e66;
}
.giris-kutu .premium-etiket {
  position:absolute; top:11px; right:12px;
  background: linear-gradient(90deg,#f9e9b2,#fae79e 70%,#e8cf8b);
  color: #6d5b19;
  font-size:.88em;
  border-radius:8px;
  padding:3px 11px 4px 9px;
  font-weight:600;
  letter-spacing:.03em;
  box-shadow:0 1px 5px #b99d2a33;
}
@media (max-width:750px){
  .giris-secimler {gap:13px;}
  .giris-kutu {padding:22px 7px 19px 7px;font-size:1.05em;min-width:140px;}
}
@media (max-width:600px){
  h1{font-size:1.15rem;}
  .main-content{padding-bottom:15px;}
  .giris-aciklama{font-size:.99em;max-width:98vw;}
  .giris-kutu{font-size:.93em;min-width:110px;}
}
.form-area, #selectArea, #resultArea { margin-top:30px; }
.input-row {
  margin-bottom: 10px;
  width: 100%;
  max-width: 350px;
  margin-left: auto;
  margin-right: auto;
}
.form-area label {
  color:#ffedc0;
  font-size:18px;
  display:block;
  text-align:left;
  margin-bottom:2px;
  margin-left:4px;
  font-weight:600;
  letter-spacing: .01em;
}
.form-area input {
  font-size: 23px;
  border-radius: 12px;
  border: none;
  padding: 15px 20px;
  outline: none;
  width: 100%;
  background: #18122d;
  color: #ffedc0;
  box-shadow: 0 1px 15px #1e164877;
  margin-bottom: 0;
}
.form-area input[type=date], .form-area input[type=time] { color: #dac490; }
.btn {
  padding: 20px 56px;
  font-size: 26px;
  margin-top:32px;
  background: linear-gradient(90deg,#8f78f7,#4322a9 80%,#be84ff);
  color: #fffde0;
  border: none; border-radius: 17px;
  cursor:pointer;
  font-family: 'Montserrat', Arial, sans-serif;
  font-weight:bold;
  letter-spacing:.8px;
  box-shadow:0 6px 20px #59459d66,0 1px 3px #fff2;
  transition: filter .17s;
  width: 100%;
  max-width: 350px;
  display: block;
  margin-left:auto; margin-right:auto;
}
.btn:hover { filter:brightness(1.13) drop-shadow(0 2px 8px #7f5bff22); }
.deck {
  width: 100%;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: flex-end;
  gap: 3vw;
  margin: 32px auto 18px;
}
@media (max-width: 700px) {
  .deck {
    display: grid;
    grid-template-columns: 1fr;
    gap: 22px 0;
    width: 100%;
    max-width: 320px;
    margin: 24px auto 10px auto;
  }
}
.tarot-card {
  background: none!important;
  box-shadow: none!important;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  align-items: center;
  border: none;
  transition: transform .18s cubic-bezier(.41,1.26,.39,1.05), box-shadow .18s;
  filter: drop-shadow(0 1px 9px #08071744);
  position: relative;
  perspective: 600px;
}
.tarot-card.open, .tarot-card.selected { cursor:default; }
.tarot-card.selected:not(.open) {
  box-shadow: 0 0 12px #ecd785ee, 0 0 26px #f3e7ab55;
  transform: scale(1.07) rotate(-2deg);
  filter: brightness(1.07) drop-shadow(0 1px 11px #f1d27177);
}
.tarot-img-box {
  width: 100%;
  aspect-ratio: 2/3;
  max-width: 190px;
  min-width: 70px;
  background: #000;
  border-radius: 13px;
  box-shadow: 0 4px 16px #39236177, 0 1px 8px #26223266;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto;
  position: relative;
  border: 1.2px solid #524173;
}
.tarot-card img, .tarot-back-img {
  width: 100%; height: 100%;
  object-fit: contain !important;
  object-position: center center;
  background: #000;
  display: block;
  border-radius: 13px;
  transition: filter .13s, opacity .16s;
  filter:brightness(.98);
}
.tarot-label {
  font-size: 22px;
  margin: 16px 0 0;
  font-weight: bold; color: #ffeaae;
  text-shadow: 0 1px 2px #19162c, 0 2px 12px #7e5b2b33;
  text-align: center;
  width: 100%;
  font-family:'Playfair Display', serif;
  letter-spacing:.6px;
}
.result-area-outer {
  display: flex; flex-direction: column;
  align-items: center; width: 100%;
}
.result-title {
  color:#fbecc6;
  font-size: 37px;
  font-weight: bold;
  margin-bottom: 42px;
  margin-top: 0;
  text-align: center;
  width: 100%;
  font-family: 'Playfair Display',serif;
  letter-spacing:.7px;
  background: linear-gradient(90deg,#ecd494 20%,#fffbe3 70%,#ebd18e 100%);
  background-clip: text; -webkit-background-clip: text;
  -webkit-text-fill-color: transparent; text-fill-color: transparent;
  text-shadow:0 2px 13px #e3c86b55,0 1px 3px #553c2b22;
}
.result-area-inner {
  display: grid;
  grid-template-columns: repeat(3, minmax(190px,1fr));
  gap: 34px;
  justify-content: center;
  align-items: start;
  width: 100%;
  max-width: 1100px;
  margin: auto;
  padding-bottom: 28px;
}
@media (max-width: 1000px) {
  .result-area-inner {
    grid-template-columns: 1fr;
    gap: 22px;
    max-width: 340px;
    padding-bottom:10px;
  }
}
.card-meaning {
  margin:20px 10px 0 10px;
  color:#fff6e0;
  font-size:20px;
  line-height:1.62;
  text-align: center;
  font-family:'Montserrat',Arial,sans-serif;
  min-height:70px;
  letter-spacing:.08em;
  border-radius:9px;
  padding: 7px 5px 7px 5px;
}
.summary-yorum {
  background: #14111cdd;
  margin: 42px auto 0 auto;
  color: #f3e5bb;
  font-size: 1.25em;
  line-height: 1.75;
  max-width: 830px;
  border-radius: 18px;
  padding: 32px 36px 35px 34px;
  box-shadow: 0 4px 22px #2f2436a1, 0 1px 5px #eee2bb19;
  text-align: left;
  letter-spacing:.035em;
}
.hint-burc {color:#d5caad;font-size:20px;margin:28px 0 12px;}
.flip-anim {
  transition:transform 0.59s cubic-bezier(.47,1.55,.37,.94);
  transform-style: preserve-3d;
  position: relative;
}
.flipped {
  transform: rotateY(180deg);
}
.tarot-img-box .front,
.tarot-img-box .back {
  position: absolute;
  top:0; left:0; width:100%; height:100%;
  backface-visibility: hidden;
  border-radius:13px;
}
.tarot-img-box .back {
  z-index:2;
}
.tarot-img-box .front {
  transform: rotateY(180deg);
  z-index: 1;
}
</style>
</head>
<body>
<div class="main-content">
  <h1>✨ Hoş Geldiniz!</h1>
  <div class="giris-aciklama">
    <b>Tarot Falı ile geleceğinize ışık tutun.</b><br>
    Klasik tarot destesiyle, enerjinizi ve kaderinizi birlikte keşfedelim.<br>
    Şu anda <b>3 Kartlık Açılım</b> hizmetimiz açık. Diğer açılımlar çok yakında burada olacak!
  </div>
  <div id="girisSecim" class="giris-secimler">
    <div class="giris-kutu" id="secim-3kart" tabindex="0">
      <span class="emoji">🔮</span>
      3 Kartlık Tarot Açılımı
    </div>
    <div class="giris-kutu disabled" tabindex="-1">
      <span class="emoji">💞</span>
      Aşk Açılımı
      <span class="premium-etiket">Premium Yakında</span>
    </div>
    <div class="giris-kutu disabled" tabindex="-1">
      <span class="emoji">💼</span>
      Kariyer Açılımı
      <span class="premium-etiket">Premium Yakında</span>
    </div>
  </div>
  <div class="form-area hidden" id="formArea">
    <div class="input-row">
      <label for="fullName">Ad Soyad</label>
      <input type="text" id="fullName" placeholder="Ad Soyad">
    </div>
    <div class="input-row">
      <label for="birthDate">Doğum Tarihi</label>
      <input type="date" id="birthDate">
    </div>
    <div class="input-row">
      <label for="birthTime">Doğum Saati (opsiyonel)</label>
      <input type="time" id="birthTime" placeholder="Doğum Saati (opsiyonel)">
    </div>
    <button id="devamBtn" class="btn">Devam Et 🧿</button>
  </div>
  <div id="selectArea" class="hidden">
    <div id="phaseTitle" style="color:#ffecc9;font-size:29px;margin-bottom:26px;text-shadow:0 1px 12px #232a3b;">Geçmiş için bir kart seç</div>
    <div id="deck" class="deck"></div>
  </div>
  <div id="resultArea" class="result-area hidden"></div>
</div>
<script>
// Açılım seçimi
document.getElementById('secim-3kart').onclick = function() {
  document.getElementById('girisSecim').classList.add('hidden');
  document.getElementById('formArea').classList.remove('hidden');
};
// Tarot kartları ve fonksiyonlar aynı şekilde devam
const tarotBackIMG = "https://i.pinimg.com/1200x/de/6d/78/de6d78f74e682c255b17ba7b2a0b9922.jpg";
const tarotCards = [
  {
    name: "Aptal",
    img: "https://i.pinimg.com/1200x/95/75/b2/9575b2acd29bf516d8a7cf02402bb54a.jpg",
    meanings: {
      past: "Geçmiş: Hayatında eskiye dair kaygı ve kısıtlamaları bırakma dönemi olmuş. Cesurca yeni başlangıçlara adım atmış, bazı riskler almış olabilirsin. Geçmişin yüklerinden arınmış ve içindeki çocuğu dinlemişsin.",
      present: "Şimdi: Şu an sana sunulan fırsatları özgürce keşfetmeye açık bir ruh halindesin. Önünde yepyeni bir yol var ve içsel sesin seni yepyeni serüvenlere çağırıyor. Risk almayı dene ama sorumlulukları da unutma.",
      future: "Gelecek: Seni bekleyen yepyeni başlangıçlar ve maceralar var! Hayatında hiç denemediğin kapılar açılacak. Korkusuzca hareket etmeye devam edersen, hayatına renk ve heyecan gelecek."
    },
    emoji: "🤹‍♂️"
  },
  {
    name: "Büyücü",
    img: "https://i.pinimg.com/1200x/89/32/b8/8932b890833f0294c811e330687ae67b.jpg",
    meanings: {
      past: "Geçmiş: Geçmişte yeteneklerini ve kaynaklarını aktif biçimde kullanmaya başlamışsın. Hayalini kurduğun bir şeyi hayata geçirmiş veya önemli bir girişimde bulunmuş olabilirsin.",
      present: "Şimdi: Şu an, zihinsel gücünün ve konsantrasyonunun zirvesindesin. Fikirlerini gerçeğe dönüştürmek için mükemmel bir zaman. Elindeki imkanların farkına var!",
      future: "Gelecek: İlerleyen dönemde istediğin her şeyi gerçekleştirebilme potansiyeline sahipsin. Hedeflerine ulaşmak için her şey sende mevcut; yeter ki niyet et ve harekete geç!"
    },
    emoji: "🪄"
  },
  {
    name: "Baş Rahibe",
    img: "https://i.pinimg.com/1200x/c1/36/04/c13604c1cf56137b891380da1a9eea49.jpg",
    meanings: {
      past: "Geçmiş: Sezgilerinle hareket ettiğin, bilinmeyenlerin peşinden gittiğin bir dönem yaşamışsın. Derin bir içsel sorgulama ve manevi gelişim öne çıkıyor.",
      present: "Şimdi: Şu an, bilinçaltın ve sezgilerin çok güçlü. Kararlarında sadece mantığı değil, iç sesini de mutlaka dinle. Biraz yalnız kalmak ve ruhunu dinlemek sana iyi gelebilir.",
      future: "Gelecek: Yakın gelecekte içsel bilgeliğinle önemli sırları açığa çıkaracaksın. Sezgilerini takip edersen, beklenmedik fırsatlar önüne serilecek."
    },
    emoji: "🌙"
  },
  {
    name: "İmparatoriçe",
    img: "https://i.pinimg.com/1200x/2e/db/f2/2edbf2d51095e73034d467298b8c3ecd.jpg",
    meanings: {
      past: "Geçmiş: Aile, sevgi ve bereket enerjisi geçmişinin temelini oluşturmuş. Yaratıcılık ve kendini ifade etme konusunda verimli bir süreç geçirmiş olabilirsin.",
      present: "Şimdi: Hayatında büyüme, bolluk ve destek zamanı. Duygusal ve fiziksel açıdan kendini şımartabileceğin, doğayla bağlantı kurabileceğin bir dönemdesin.",
      future: "Gelecek: Önünde bereket ve huzur dolu bir dönem var. Yeni bir aşk, ailede güzel gelişmeler ya da yaratıcı bir projenin başarıya ulaşması seni bekliyor."
    },
    emoji: "👑"
  },
  {
    name: "İmparator",
    img: "https://i.pinimg.com/1200x/33/c2/d4/33c2d42f970ae4f0c4ca0aac7d3e9a59.jpg",
    meanings: {
      past: "Geçmiş: Düzen, disiplin ve otoriteyle yoğrulmuş bir geçmiş. Kuralları belirlemiş ve hayatını yapılandırmaya çalışmışsın.",
      present: "Şimdi: Kararlarında sağlam ve kararlı olman gereken bir dönemdesin. Sorumluluklarını üstlenmekten çekinme. Güç seninle!",
      future: "Gelecek: Kendi hayatının lideri olacaksın. Kontrolü eline aldığında, hedeflerine ulaşacaksın. Otoriten artacak."
    },
    emoji: "🏛️"
  },
  {
    name: "Aşıklar",
    img: "https://i.pinimg.com/1200x/66/a8/e7/66a8e7aa137882ced8daa6e0e3063cd9.jpg",
    meanings: {
      past: "Geçmiş: Kalbinle önemli bir seçim yaptığın veya aşk hayatında dönüm noktası yaşadığın bir dönem var.",
      present: "Şimdi: Şu an ilişkiler, dostluklar ya da iş ortaklıkları ön planda. Seçimlerinde kalbini dinle. Gerçek sevgiyi bulabilirsin.",
      future: "Gelecek: Aşk hayatında büyük bir fırsat, yepyeni bir ilişki ya da mevcut ilişkide güçlenme yaşanacak. Seçimlerinin sonuçları seni mutlu edecek."
    },
    emoji: "💘"
  },
  {
    name: "Güç",
    img: "https://i.pinimg.com/1200x/45/30/75/4530755737a4f036e5db8efa81811d34.jpg",
    meanings: {
      past: "Geçmiş: Zorluklar karşısında sabırlı ve dirençli olmuşsun. İçsel gücünü ortaya koymuş, sakinlikle her şeyi aşmışsın.",
      present: "Şimdi: Kendine güvenin ve sabrın en büyük silahın. Zorluklara karşı dimdik durmaya devam et. Kontrol sende.",
      future: "Gelecek: Yakında cesaretinle herkesin hayranlığını kazanacaksın. Engelleri aşacak ve büyük bir zafer elde edeceksin."
    },
    emoji: "🦁"
  },
  {
    name: "Ermiş",
    img: "https://i.pinimg.com/1200x/02/a7/79/02a779d8c755e082be57f38a9832d141.jpg",
    meanings: {
      past: "Geçmiş: İçsel yolculuk, yalnızlık ve bilgelik arayışı geçmişinde önemli bir rol oynamış.",
      present: "Şimdi: Şu sıralar daha fazla içe dönüyor, hayatının anlamını ve yönünü sorguluyorsun. Ruhunu dinle.",
      future: "Gelecek: Yakında derin bir içsel aydınlanma yaşayacaksın. Doğru yolu bulacak, huzura kavuşacaksın."
    },
    emoji: "🧘"
  }
];
const burclar = [
  {ad:"Oğlak",    bas:"01-01", bit:"01-20"},
  {ad:"Kova",     bas:"01-21", bit:"02-19"},
  {ad:"Balık",    bas:"02-20", bit:"03-20"},
  {ad:"Koç",      bas:"03-21", bit:"04-20"},
  {ad:"Boğa",     bas:"04-21", bit:"05-21"},
  {ad:"İkizler",  bas:"05-22", bit:"06-21"},
  {ad:"Yengeç",   bas:"06-22", bit:"07-22"},
  {ad:"Aslan",    bas:"07-23", bit:"08-22"},
  {ad:"Başak",    bas:"08-23", bit:"09-22"},
  {ad:"Terazi",   bas:"09-23", bit:"10-22"},
  {ad:"Akrep",    bas:"10-23", bit:"11-21"},
  {ad:"Yay",      bas:"11-22", bit:"12-21"},
  {ad:"Oğlak",    bas:"12-22", bit:"12-31"}
];
const gunesYorum = {
  "Koç":"Her koşulda liderlik enerjin yüksek, girişimci ve cesur yanın seni öne çıkarıyor.",
  "Boğa":"Sabırlı ve güvenli adımlarınla huzuru ve refahı arıyorsun.",
  "İkizler":"Fikirlerin ve iletişimin çok güçlü, her zaman yeniye açıksın.",
  "Yengeç":"Sezgisel ve duygusalsın, aile senin için önemli.",
  "Aslan":"Sahnede olmayı seviyorsun, yaratıcı ve özgüvenlisin.",
  "Başak":"Detaycı ve analitiksin, mükemmeli arıyorsun.",
  "Terazi":"Denge ve güzellik peşindesin, ilişkiler ön planda.",
  "Akrep":"Tutkulusun ve gizemli tarafınla değişimi başlatırsın.",
  "Yay":"İyimser, maceracı ve özgür ruhlusun.",
  "Oğlak":"Disiplinli ve kararlısın, hedeflerine emin adımlarla ilerlersin.",
  "Kova":"Yenilikçi ve orijinal düşüncelisin.",
  "Balık":"Hayal gücün ve empatin çok yüksek, ruhsal yönün baskın."
};
const ayYorum = {
  "Koç":"Duyguların ani değişebilir; tepkilerini dengelemen önemli.",
  "Boğa":"Duygusal güvenlik ve huzur arayışındasın.",
  "İkizler":"Duygularını konuşarak ve yazarak rahatlatırsın.",
  "Yengeç":"Duygularınla hareket edersin, aileyle yakın olmak sana iyi gelir.",
  "Aslan":"Duygusal olarak ilgi ve beğeni beklersin.",
  "Başak":"Küçük şeyler seni mutlu ya da huzursuz edebilir.",
  "Terazi":"İlişkilerde uyum ve huzur ararsın.",
  "Akrep":"Duygularında derinlik ve yoğunluk hakim.",
  "Yay":"Özgürlük, bağımsızlık ve hareket alanı istersin.",
  "Oğlak":"Soğukkanlı ve mesafeli görünebilirsin.",
  "Kova":"Duygusal olarak mantıklı ve tarafsız davranırsın.",
  "Balık":"Empatik ve hassassın, başkalarının hislerini kolayca hissedersin."
};
function gunesBurcu(dateStr){
  if(!dateStr) return '';
  let [yil, ay, gun]=dateStr.split('-');
  ay=parseInt(ay); gun=parseInt(gun);
  let d=`${ay.toString().padStart(2,'0')}-${gun.toString().padStart(2,'0')}`;
  for(let i=0;i<burclar.length-1;i++){
    if((d>=burclar[i].bas&&d<=burclar[i].bit)) return burclar[i].ad;
  }
  return burclar[burclar.length-1].ad;
}
function ayBurcu(dateStr){
  if(!dateStr) return '';
  let [yil, ay, gun]=dateStr.split('-');
  ay=parseInt(ay); gun=parseInt(gun);
  if     (ay==1) return gun<21 ? "İkizler" : "Yengeç";
  else if(ay==2) return gun<19 ? "Yengeç" : "Aslan";
  else if(ay==3) return gun<21 ? "Aslan" : "Başak";
  else if(ay==4) return gun<20 ? "Başak" : "Terazi";
  else if(ay==5) return gun<21 ? "Terazi" : "Akrep";
  else if(ay==6) return gun<22 ? "Akrep" : "Yay";
  else if(ay==7) return gun<23 ? "Yay" : "Oğlak";
  else if(ay==8) return gun<23 ? "Oğlak" : "Kova";
  else if(ay==9) return gun<23 ? "Kova" : "Balık";
  else if(ay==10)return gun<23 ? "Balık" : "Koç";
  else if(ay==11)return gun<22 ? "Koç" : "Boğa";
  else if(ay==12)return gun<22 ? "Boğa" : "İkizler";
  return "Başak";
}
let selected=[], phase=0, gunesB, ayB, gunesY, ayY;
const phaseTitles=[
  "Geçmiş için bir kart seç",
  "Şimdiki zaman için bir kart seç",
  "Gelecek için bir kart seç"
];
document.getElementById('devamBtn').onclick=()=>{
  const fn=document.getElementById('fullName').value.trim();
  const bd=document.getElementById('birthDate').value;
  const bt=document.getElementById('birthTime').value;
  if(!fn||!bd){alert("Ad Soyad ve Doğum Tarihi gerekli.");return;}
  gunesB=gunesBurcu(bd); ayB=bt?ayBurcu(bd):null;
  gunesY=gunesB&&gunesYorum[gunesB]?gunesYorum[gunesB]:"";
  ayY=ayB&&ayYorum[ayB]?ayYorum[ayB]:"";
  document.getElementById('formArea').classList.add('hidden');
  document.getElementById('selectArea').classList.remove('hidden');
  renderDeck();
};
function renderDeck(){
  const deck=document.getElementById('deck');
  deck.innerHTML='';
  let cardCount = tarotCards.length;
  let isMobile = window.innerWidth <= 700;
  let cardW = isMobile ? Math.max(window.innerWidth*0.75,90) : Math.max(Math.min((window.innerWidth*0.85-(3*cardCount))/cardCount, 190),70);
  tarotCards.forEach((c,i)=>{
    const sel=selected.includes(i);
    const div=document.createElement('div');
    div.className='tarot-card'+(sel?' open':'');
    div.style.width = cardW+"px";
    div.style.minWidth = cardW+"px";
    div.style.maxWidth = cardW+"px";
    if(!sel){
      div.innerHTML=`<div class="tarot-img-box" style="width:${cardW-2}px;min-width:${cardW-2}px;max-width:${cardW-2}px;"><div class="flip-anim"><img class="tarot-back-img back" src="${tarotBackIMG}" alt="Kart Arkası" loading="lazy"></div></div>`;
      div.onclick=()=>pick(i,div);
    }else{
      div.innerHTML=`<div class="tarot-img-box" style="width:${cardW-2}px;min-width:${cardW-2}px;max-width:${cardW-2}px;"><div class="flip-anim flipped"><img class="front" src="${c.img}" alt="${c.name}" loading="lazy"></div></div><div class="tarot-label">${c.name}</div>`;
    }
    deck.appendChild(div);
  });
  document.getElementById('phaseTitle').textContent=phaseTitles[phase]||"Kartların ve yorumları:";
}
window.addEventListener("resize", ()=>{if(document.getElementById("selectArea")&&!document.getElementById("selectArea").classList.contains("hidden")) renderDeck();});
function pick(i,div){
  if(selected.length>=3||selected.includes(i))return;
  const animDiv=div.querySelector('.flip-anim');
  animDiv.classList.add('flipped');
  setTimeout(()=>{
    selected.push(i); renderDeck();
    phase++;
    if(selected.length>=3) setTimeout(showResults,420);
  },470);
}
function showResults(){
  document.getElementById('selectArea').classList.add('hidden');
  const res=document.getElementById('resultArea');
  res.classList.remove('hidden');
  let burcInfo = `<div class='hint-burc'>🔆 <b>Güneş Burcunuz: <span style='color:#ffd986'>${gunesB||"-"}</span></b>`;
  if(gunesY) burcInfo += `<br><i>🌞 ${gunesY}</i>`;
  if(ayB){
    burcInfo += `<br><b>🌚 Ay Burcunuz: <span style='color:#ffefc0'>${ayB}</span></b>`;
    if(ayY) burcInfo += `<br><i>${ayY}</i>`;
  }else{
    burcInfo += `<br><span style='color:#bcae7b'>Doğum saatinizi girerseniz ay burcunuza özel yorum da eklenir.</span>`;
  }
  burcInfo += `</div>`;
  let detailCards = selected.map((i,k)=>{
    const c=tarotCards[i];
    let period = (k==0) ? "past" : (k==1) ? "present" : "future";
    return `<div class="tarot-card open" style="display:flex; flex-direction:column; align-items:center; width:100%;max-width:320px;margin:auto;">
        <div class="tarot-img-box" style="width:100%;max-width:320px;"><img src="${c.img}" alt="" loading="lazy"></div>
        <div class="tarot-label">${c.name}</div>
        <div class="card-meaning">${c.meanings[period]}</div>
      </div>`;
  }).join('');
  let kartIsimleri = selected.map(i=>tarotCards[i].name).join(', ');
  let kartEmojileri = selected.map(i=>tarotCards[i].emoji).join(' ');
  let ozgunOzet = `✨ <b>Tarot Açılımı Özet Yorumun:</b><br><br>
    ${kartEmojileri} <b>${kartIsimleri}</b> kartlarının açılımı, Güneş burcun olan <b>${gunesB}</b> ve ${ayB?`Ay burcun olan <b>${ayB}</b>`:''} enerjileriyle birleşince;
    <br><br>
    <b>Geçmişte</b>, ${tarotCards[selected[0]].meanings.past.replace(/^[^:]+: /,'')}, 
    <br><b>şu anda</b> ${tarotCards[selected[1]].meanings.present.replace(/^[^:]+: /,'')},
    <br><b>gelecekte ise</b> ${tarotCards[selected[2]].meanings.future.replace(/^[^:]+: /,'')}.<br><br>
    Burçların etkisiyle birlikte bu süreçte 
    <b>${gunesY}</b> ${ayB && ayY ? " ve ayrıca duygularında " + ayY : ""}
    öne çıkıyor. Tüm açılım, seni ruhsal olarak güçlendiren, hayatındaki büyük değişimi destekleyen ve kendine inancını tazeleyen bir enerji yayıyor. 🧿💫
    <br><br><b>Evrenin sana mesajı:</b> 
    Korkusuzca ilerle, kendi iç sesini ve gücünü dinle; aşk, bolluk ve bilgelik seni bekliyor!`;
  res.innerHTML='<div class="result-area-outer">';
  res.innerHTML += '<div class="result-title">🃏 Çektiğin Kartlar ve Uzun Yorumlar</div>';
  res.innerHTML += burcInfo;
  res.innerHTML += '<div class="result-area-inner">'+detailCards+'</div>';
  res.innerHTML += `<div class="summary-yorum">${ozgunOzet}</div></div>`;
  document.getElementById('phaseTitle').textContent="Kartların ve yorumları:";
}
</script>
</body>
</html>
